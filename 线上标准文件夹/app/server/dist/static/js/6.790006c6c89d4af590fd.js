webpackJsonp([6],{HN9s:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7t+N"),o=e.n(s),i={name:"History",data:function(){return{token:"",processInsId:"",pageSize:10,pageNo:1,no:!1,loading:!1,switch:!0,history:{}}},methods:{totask:function(t,a,e){this.$router.push({path:"/taskdetail",query:{actName:t,taskId:a,processInstanceId:e}})}},created:function(){var t=this;t.token=localStorage.getItem("token"),t.$http({method:"get",header:{"Content-Type":"application/json;charset=utf-8"},headers:{authorization:t.token},url:"api/peak-flow/v1/flow/historic-task?pageSize="+t.pageSize+"&pageNo="+t.pageNo+"&etpName=&createStartDate=&createEndDate=&productName=ZXD"}).then(function(a){t.history=a.data.data,0==a.data.data.list.length?t.no=!0:t.no=!1,a.data.data.count<=t.pageNo*t.pageSize?t.switch=!1:(t.switch=!0,t.pageNo=t.pageNo+1),console.log(a)}).catch(function(t){console.log(t)})},mounted:function(){var t=this;o()(document).on("scroll",function(){o()(document).scrollTop()+o()(window).height()>=o()(document).height()&&t.switch&&(t.loading=!0,t.switch=!1,t.$http({method:"get",header:{"Content-Type":"application/json;charset=utf-8"},headers:{authorization:t.token},url:"api/peak-flow/v1/flow/historic-task?pageSize=+that.pageSize+&pageNo="+t.pageNo+"&etpName=&createStartDate=&createEndDate=&productName=ZXD"}).then(function(a){t.history.list=t.history.list.concat(a.data.data.list),t.loading=!1,a.data.data.count<=t.pageNo*t.pageSize?(t.switch=!1,console.log(t.switch)):(t.switch=!0,t.pageNo=t.pageNo+1),console.log(a)}).catch(function(t){console.log(t)}))})}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"history"},[e("ul",{staticClass:"data"},t._l(t.history.list,function(a){return e("li",{key:a.id,on:{click:function(e){t.totask(a.actName,a.taskId,a.processInsId)}}},[e("div",{staticClass:"left"},[e("div",{staticClass:"name"},[t._v(t._s(a.entName))]),t._v(" "),e("div",{staticClass:"num"},[t._v("任务编号:"+t._s(a.taskId))])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"time"},[t._v(t._s(a.endTime))]),t._v(" "),e("div",{staticClass:"pass"},[t._v(t._s(a.actName))])])])})),t._v(" "),t.no?e("div",{staticClass:"notask"},[e("img",{attrs:{src:"/static/img/icon/notask.png",alt:""}}),t._v("\n    您暂时还没有历史任务\n  ")]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"},[e("img",{attrs:{src:"static/img/icon/loading.png",alt:""}}),t._v("\n    加载中...\n  ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"loading"},[t._v("\n    没有更多了\n  ")])])},staticRenderFns:[]};var c=e("VU/8")(i,n,!1,function(t){e("r/2G")},"data-v-24529be0",null);a.default=c.exports},"r/2G":function(t,a){}});
//# sourceMappingURL=6.790006c6c89d4af590fd.js.map