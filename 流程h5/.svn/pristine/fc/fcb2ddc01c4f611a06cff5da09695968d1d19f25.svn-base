<template>
  <div class="approvalRecord">
    <div v-if='no'>无审批记录</div>
    <ul class='list' v-else>
      <li v-for='list in data' v-bind:key='list.id' v-if='list.name'>
        <div class="top">
          <div class="name">
            <img src="static/img/icon/task_blue.png" alt="">{{list.name}}
          </div>
          <div class="time">
            <span></span>
          </div>
        </div>
        <ul class="bottom">
          <!-- <li v-for="item in list.fields" :key='item.id' v-if='item.value&&item.name' :class='{remark:item.type=="multi-line-text"}'> -->
          <li v-for="item in list.fields" :key='item.id' v-if='item.value&&item.name'>
            <span>{{item.name}}</span>
            <span class='data'>{{item.value}}</span>
          </li>
          <!-- <li>
            <span>备注</span>
          </li>
          <div class="remark">备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注备注</div> -->
        </ul>
      </li>
    </ul>
  </div>
</template>

<script>
export default {
  name: "approvalRecord",
  data() {
    return {
      no:true,
      taskId: "",
      data: [
        // {
        //   fields: [
        //     {
        //       fieldType: "OptionFormField",
        //       hasEmptyValue: null,
        //       id: "creditConformRequest",
        //       layout: null,
        //       name: "客户征信是否符合产品准入要求",
        //       optionType: null,
        //       options: [],
        //       optionsExpression: "${conformity}",
        //       overrideId: true,
        //       placeholder: null,
        //       readOnly: false,
        //       required: true,
        //       type: "radio-buttons",
        //       value: "符合"
        //     },
        //     {
        //       fieldType: "FormField",
        //       id: "approveRemark",
        //       layout: null,
        //       name: "备注",
        //       overrideId: true,
        //       placeholder: null,
        //       readOnly: false,
        //       required: false,
        //       type: "multi-line-text",
        //       value:
        //         "1333333"
        //     }
        //   ],
        //   key: "riskApprove",
        //   name: "准入审核",
        //   outcomes: [],
        //   version: 0
        // }
      ]
    };
  },
  methods: {},
  created() {
    console.log("createdstart");
    let that = this;
    let token = localStorage.getItem("token");
    that.taskId = that.$route.query.taskId;
    //获取审批记录
    that
      .$http({
        method: "get",
        header: {
          "Content-Type": "application/json;charset=utf-8"
        },
        headers: {
          authorization: token
        },
        url: "api/peak-flow/v1/flow/historic-task/" + that.taskId
      })
      .then(function(res) {
        if (res.data.data.length <= 1) {
          that.no = true;
        } else {
          that.no = false;
          that.data = res.data.data;
        }
        console.log(res);
      })
      .catch(function(err) {
        console.log(err);
      });
    console.log("createdend");
  }
};
</script>

<style lang="less" scoped>
.approvalRecord {
  .list {
    > li {
      margin-top: 0.2rem;
      background: #fff;
      font-size: 0.3rem;
      .top {
        line-height: 1.2rem;
        padding: 0 0.44rem;
        display: flex;
        justify-content: space-between;
        .name {
          display: flex;
          align-items: center;
          color: #3674b2;
          img {
            width: 0.3rem;
            height: 0.4rem;
            margin-right: 0.2rem;
          }
        }
        .time {
          color: #c6c6c6;
          font-size: 0.28rem;
        }
      }
      .bottom {
        border-top: 1px solid #cacaca;
        padding: 0.3rem 0.5rem;
        font-size: 0.28rem;
        > li {
          line-height: 0.64rem;
          display: flex;
          justify-content: space-between;
          span {
            width:3rem;
            color: #999999;
          }
          .data {
            color: #333333;
          }
          .data.no {
            color: #f35535;
          }
        }
        > li.remark {
          display: block;
          span {
            display: block;
            line-height: 0.5rem;
            white-space: normal;
            word-break: break-all;
          }
        }
      }
    }
    > li:first-child {
      margin-top: 0;
    }
  }
}
</style>
